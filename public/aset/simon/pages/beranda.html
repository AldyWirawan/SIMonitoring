<script type="text/javascript">

	$(document).ready(function(){
		$.getJSON('dashboard/progres', function (data) {
			console.log(data);
			var cat = new Array();
			var val = new Array();
			var processed_json = new Array();
			$.map(data, function (obj, i) {
				cat.push(obj.nama_uuk);
				val.push(parseFloat(obj.avg));
    			processed_json.push({ x: obj.nama_uuk,y: parseFloat(obj.avg) });
			});
			console.log(cat);
			console.log(val);
			console.log(processed_json);
			
	        $('#grafik-progres').highcharts({
	            chart: {
	                type: 'column'
	            },
	            title: {
	                text: 'Persentase Progres Proyek'
	            },
	            subtitle: {
	                text: 'rata-rata'
	            },
	            xAxis: {
	            	categories: cat
	            },
	            yAxis: {
	                title: {
	                    text: 'persen'
	                }
	            },
	            legend: {
	                enabled: false
	            },
	            /*
	            tooltip: {
	            	useHTML: true,
	                formatter: function() {
	                	var red = '<img src="red.png" title="" alt="" border="0" height="16" width="16">';
	                	var green = '<img src="green.png" title="" alt="" border="0" height="16" width="16">';
	                	var newl;
	                	var newpr;
	                	if (this.point.l > 0)
	                		newl = green;
	                	else
	                		newl = red;
	                	if (this.point.pr > 0)
	                		newpr = green;
	                	else
	                		newpr = red;
	                    return 'Harga :<b>' + this.y + '</b><br>Prediksi :' + newpr;
	                }
	            }, */

	            series: [{
	            	name: "rata-rata",
	            	data: val
	            }]
	          
	        });
	    });



		$.getJSON('dashboard/kontrak', function (data) {
			console.log(data);
			var cat = new Array();
			var val = new Array();
			var processed_json = new Array();
			$.map(data, function (obj, i) {
				cat.push(obj.nama_uuk);
				val.push(parseFloat(obj.avg));
    			processed_json.push({ x: obj.nama_uuk,y: parseFloat(obj.avg) });
			});
			console.log(cat);
			console.log(val);
			console.log(processed_json);
			
	        $('#grafik-kontrak').highcharts({
	            chart: {
	                type: 'column'
	            },
	            title: {
	                text: 'Kontrak Total Proyek'
	            },
	            subtitle: {
	                text: 'rata-rata'
	            },
	            xAxis: {
	            	categories: cat
	            },
	            yAxis: {
	                title: {
	                    text: 'rupiah'
	                }
	            },
	            legend: {
	                enabled: false
	            },
	            /*
	            tooltip: {
	            	useHTML: true,
	                formatter: function() {
	                	var red = '<img src="red.png" title="" alt="" border="0" height="16" width="16">';
	                	var green = '<img src="green.png" title="" alt="" border="0" height="16" width="16">';
	                	var newl;
	                	var newpr;
	                	if (this.point.l > 0)
	                		newl = green;
	                	else
	                		newl = red;
	                	if (this.point.pr > 0)
	                		newpr = green;
	                	else
	                		newpr = red;
	                    return 'Harga :<b>' + this.y + '</b><br>Prediksi :' + newpr;
	                }
	            }, */

	            series: [{
	            	name: "rata-rata",
	            	data: val
	            }]
	          
	        });
	    });
	});
</script>

<div style="width: 87%; margin: 25px auto">
	<div class="row">
		<div class="col-md-6">
			<div class="well">
				<div id="grafik-progres"></div>
			</div>
		</div>
		<div class="col-md-6">
			<div class="well">
				<div id="grafik-kontrak"></div>
			</div>
		</div>
	</div>
</div>
